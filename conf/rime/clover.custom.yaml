# https://github.com/fkxxyz/rime-cloverpinyin/wiki/issues
patch:
  speller/algebra:
    # æ¨¡ç³ŠéŸ³å®šä¹‰
    # éœ€è¦å“ªç»„å°±åˆ å»è¡Œé¦–çš„ # å·ï¼Œå•åŒå‘ä»»é€‰
    #- derive/^([zcs])h/$1/             # zh, ch, sh => z, c, s
    - derive/^([zcs])([^h])/$1h$2/     # z, c, s => zh, ch, sh

    #- derive/^n/l/                     # n => l
    #- derive/^l/n/                     # l => n

    # è¿™ä¸¤ç»„ä¸€èˆ¬æ˜¯å•å‘çš„
    #- derive/^r/l/                     # r => l

    #- derive/^ren/yin/                 # ren => yin, reng => ying
    #- derive/^r/y/                     # r => y

    # ä¸‹é¢ hu <=> f è¿™ç»„å†™æ³•å¤æ‚ä¸€äº›ï¼Œåˆ†æƒ…å†µè®¨è®º
    #- derive/^hu$/fu/                  # hu => fu
    #- derive/^hong$/feng/              # hong => feng
    #- derive/^hu([in])$/fe$1/          # hui => fei, hun => fen
    #- derive/^hu([ao])/f$1/            # hua => fa, ...

    #- derive/^fu$/hu/                  # fu => hu
    #- derive/^feng$/hong/              # feng => hong
    #- derive/^fe([in])$/hu$1/          # fei => hui, fen => hun
    #- derive/^f([ao])/hu$1/            # fa => hua, ...

    # éŸµæ¯éƒ¨ä»½
    #- derive/^([bpmf])eng$/$1ong/      # meng = mong, ...
    #- derive/([ei])n$/$1ng/            # en => eng, in => ing
    #- derive/([ei])ng$/$1n/            # eng => en, ing => in

    # åæ¨¡ç³ŠéŸ³ï¼Ÿ
    # è°è¯´æ–¹è¨€æ²¡æœ‰æ™®é€šè¯ç²¾ç¡®ã€æœ‰æ¨¡ç³ŠéŸ³ï¼Œå°±èƒ½æœ‰åæ¨¡ç³ŠéŸ³ã€‚
    # ç¤ºä¾‹ä¸ºåˆ†å°–å›¢çš„ä¸­åŸå®˜è¯ï¼š
    #- derive/^ji$/zii/   # åœ¨è®¾è®¡è€…å®‰æ’ä¸‹é¸ å é¹Šå·¢ï¼Œå°–éŸ³ i åªå¥½åŒå†™äº†
    #- derive/^qi$/cii/
    #- derive/^xi$/sii/
    #- derive/^ji/zi/
    #- derive/^qi/ci/
    #- derive/^xi/si/
    #- derive/^ju/zv/
    #- derive/^qu/cv/
    #- derive/^xu/sv/

    # éŸµæ¯éƒ¨ä»½ï¼Œåªèƒ½ä»å¤§é¢ä¸Šè¦†ç›–
    #- derive/^([bpm])o$/$1eh/          # bo => beh, ...
    #- derive/(^|[dtnlgkhzcs]h?)e$/$1eh/  # ge => geh, se => sheh, ...
    #- derive/^([gkh])uo$/$1ue/         # guo => gue, ...
    #- derive/^([gkh])e$/$1uo/          # he => huo, ...
    #- derive/([uv])e$/$1o/             # jue => juo, lve => lvo, ...
    #- derive/^fei$/fi/                 # fei => fi
    #- derive/^wei$/vi/                 # wei => vi
    #- derive/^([nl])ei$/$1ui/          # nei => nui, lei => lui
    #- derive/^([nlzcs])un$/$1vn/       # lun => lvn, zun => zvn, ... 
    #- derive/^([nlzcs])ong$/$1iong/    # long => liong, song => siong, ...
    # è¿™ä¸ªåŠæ³•è™½ä»æ‹¼å†™ä¸Šåšå‡ºäº†åŒºåˆ†ï¼Œç„¶è€Œå—è¯å…¸åˆ¶çº¦ï¼Œå€™é€‰å­—ä»æ˜¯æ··çš„ã€‚
    # åªæœ‰çœŸæ­£çš„æ–¹éŸ³è¾“å…¥æ–¹æ¡ˆæ‰èƒ½åšåˆ°ï¼ä½†ã€Œåæ¨¡ç³ŠéŸ³ã€è¿™ä¸ªç©æ³•å¿«é€Ÿè€Œæœ‰æ•ˆï¼

    # æ¨¡ç³ŠéŸ³å®šä¹‰å…ˆäºç®€æ‹¼å®šä¹‰ï¼Œæ–¹å¯ä»¤ç®€æ‹¼æ”¯æŒä»¥ä¸Šæ¨¡ç³ŠéŸ³
    - abbrev/^([a-z]).+$/$1/           # ç°¡æ‹¼ï¼ˆé¦–å­—æ¯ï¼‰
    - abbrev/^([zcs]h).+$/$1/          # ç°¡æ‹¼ï¼ˆzh, ch, shï¼‰

    # ä»¥ä¸‹æ˜¯ä¸€ç»„å®¹é”™æ‹¼å†™ï¼Œã€Šæ±‰è¯­æ‹¼éŸ³ã€‹æ–¹æ¡ˆä»¥å‰è€…ä¸ºæ­£
    - derive/^([nl])ve$/$1ue/          # nve = nue, lve = lue
    - derive/^([jqxy])u/$1v/           # ju = jv,
    - derive/un$/uen/                  # gun = guen,
    - derive/ui$/uei/                  # gui = guei,
    - derive/iu$/iou/                  # jiu = jiou,

    # è‡ªåŠ¨çº æ­£ä¸€äº›å¸¸è§çš„æŒ‰é”®é”™è¯¯
    - derive/([aeiou])ng$/$1gn/        # dagn => dang 
    - derive/([dtngkhrzcs])o(u|ng)$/$1o/  # zho => zhong|zhou
    - derive/ong$/on/                  # zhonguo => zhong guo
    - derive/ao$/oa/                   # hoa => hao
    - derive/([iu])a(o|ng?)$/a$1$2/    # tain => tian

#   switches:
#     - name: zh_simp_s2t
#       reset: 0
#       states: [ ç®€, ç¹ ]
#     - name: emoji_suggestion
#       reset: 1
#       states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]
#     - name: symbol_support
#       reset: 1
#       states: [ "æ— ç¬¦", "ç¬¦" ]
#     - name: ascii_punct
#       reset: 0
#       states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
#     - name: full_shape
#       reset: 0
#       states: [ åŠ, å…¨ ]
#     - name: ascii_mode
#       reset: 0
#       states: [ ä¸­, è‹± ]
#     - name: show_es
#       reset: 1
#       states: [ ğŸ˜”, ğŸ˜€ ]

#   engine:
#     filters:
#       - simplifier@es_conversion

#   es_conversion:
#     opencc_config: es.json
#     option_name: show_es

#   "switches/@5/reset": 1